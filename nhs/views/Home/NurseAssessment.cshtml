@model NHS.Common.clsNurseAssessment

@{
    /**/

    ViewBag.Title = "Nurse Assessment";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .square {
        height: 30px;
        width: 100px;
        background-color: forestgreen;
    }
</style>
<br />
<br />
<div class="row form-group">
    <div class="col-xs-12 col-lg-12">
        <div class="row" align="right">
            <div class="col-md-12">
                <input type="image" src="~/images/Delete.png" width="30" height="30" alt="Submit" id="btnClose1" title="Close" />
            </div>
        </div>
    </div>
</div>
@using (Html.BeginForm("NurseAssessment", "Home", FormMethod.Post, new { @id = Model.Patient_ID, @mrn = Model.MRN }))
{
    <input type="hidden" id="Patient_ID" name="Patient_ID" value="@Model.Patient_ID" />
    <input type="hidden" id="MRN" name="MRN" value="@Model.MRN" />
    <div class="lable_title_blue">
        <h2>Nurse Assessment</h2>
    </div><br />
    <table width="99%" border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td>
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td width="34%" align="left" valign="top">
                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td>
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                            <tr>
                                                <td width="100%">
                                                    @if (Model.NotRequired)
                                                    {
                                                        <input type="checkbox" id="NotRequired" name="NotRequired" checked><span>&nbsp;Appointment Not Required</span>
                                                    }
                                                    else
                                                    {
                                                        <input type="checkbox" id="NotRequired" name="NotRequired"><span>&nbsp;Appointment Not Required</span>
                                                    }
                                                </td>

                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @if (ViewBag.IsReadOnly)
                                        {
                                            if (Model.ID == 0)
                                            {
                                                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                    <tr>
                                                        <td width="40%">Clinic Name</td>
                                                        <td width="60%">
                                                            <span>Test Clinic</span>
                                                        </td>
                                                    </tr>
                                                </table>
                                            }
                                        }
                                        else
                                        {
                                            if (Model.ID == 0)
                                            {
                                                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                    <tr>
                                                        <td width="40%">Clinic Name</td>
                                                        <td width="60%">
                                                            <span>Test Clinic</span>
                                                        </td>
                                                    </tr>
                                                </table>
                                            }
                                        }
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                            <tr>
                                                <td width="40%">&nbsp;</td>
                                                <td width="60%">&nbsp;</td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">Activity Status</td>
                                    <td width="60%">
                                        <select style="font-size:12px;  margin:0 0 0 0;" class="form-control" id="ddlActivityStatus" name="ddlActivityStatus">
                                            @if (Model.ActivityStatusID == 0)
                                            {
                                                <option selected value="0">
                                                    All Activity Status
                                                </option>
                                            }
                                            else
                                            {
                                                <option value="0">
                                                    All Activity Status
                                                </option>
                                            }
                                            @foreach (var item in ViewBag.ActivityStatus)
                                            {
                                                if (item.ID == Model.ActivityStatusID)
                                                {
                                                    <option selected value="@item.ID">@item.ActivityStatus</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.ID">@item.ActivityStatus</option>
                                                }
                                            }
                                        </select>

                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">Pathway Event</td>
                                    <td width="60%">
                                        <select style="font-size:12px;  margin:0 0 0 0;" class="form-control" id="ddlPathwayEvent" name="ddlPathwayEvent">
                                            @if (Model.PathwayEventID == 0)
                                            {
                                                <option selected value="0">
                                                    All Pathway Events
                                                </option>
                                            }
                                            else
                                            {
                                                <option value="0">
                                                    All Pathway Events
                                                </option>
                                            }
                                            @foreach (var item in ViewBag.PathwayEvents)
                                            {
                                                if (item.ID == Model.PathwayEventID)
                                                {
                                                    <option selected value="@item.ID">@item.PathwayEvent</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.ID">@item.PathwayEvent</option>
                                                }
                                            }
                                        </select>

                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%"><b>Other Outcome</b></td>
                                    <td width="40%">&nbsp;</td>
                                </tr>
                                <tr>
                                    <td width="40%">Agreement Received</td>
                                    <td width="60%">
                                        @if (ViewBag.IsReadOnly)
                                        {
                                            if (Model.ID == 0)
                                            {
                                                <input type="radio" disabled id="AgreementReceived" name="AgreementReceived" value="Yes"><span> Yes </span>
                                                <input type="radio" disabled id="AgreementReceived" name="AgreementReceived" value="Yes"><span> Yes </span>
                                            }
                                            else if (Model.AgreementReceived == true)
                                            {
                                                <input type="radio" disabled id="AgreementReceived" checked name="AgreementReceived" value="Yes"><span> Yes </span>
                                                <input type="radio" disabled id="AgreementReceived" name="AgreementReceived" value="Yes"><span> Yes </span>
                                            }
                                            else
                                            {
                                                <input type="radio" disabled id="AgreementReceived" name="AgreementReceived" value="Yes"><span> Yes </span>
                                                <input type="radio" disabled id="AgreementReceived" checked name="AgreementReceived" value="Yes"><span> Yes </span>
                                            }
                                        }
                                        else
                                        {
                                            if (Model.ID == 0)
                                            {
                                                <input type="radio" id="AgreementReceived" name="AgreementReceived" value="Yes"><span> Yes </span>
                                                <input type="radio" id="AgreementReceived" name="AgreementReceived" value="No"><span> No </span>
                                            }
                                            else if (Model.AgreementReceived == true)
                                            {
                                                <input type="radio" id="AgreementReceived" checked name="AgreementReceived" value="Yes"><span> Yes </span>
                                                <input type="radio" id="AgreementReceived" name="AgreementReceived" value="No"><span> No </span>
                                            }
                                            else
                                            {
                                                <input type="radio" id="AgreementReceived" name="AgreementReceived" value="Yes"><span> Yes </span>
                                                <input type="radio" id="AgreementReceived" checked name="AgreementReceived" value="No"><span> No </span>
                                            }
                                        }
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td width="4%" align="left" valign="top">&nbsp;</td>
                        <td width="42%" align="left" valign="top">
                            <table style="border-collapse:separate;border:solid black 1px;border-radius:6px; -moz-border-radius:6px; border-color:#4F81BD;" width="100%">
                                <tbody>
                                    <tr style="border-collapse:separate;border:solid black 1px;border-radius:6px; -moz-border-radius:6px; border-color:#a9d7cc">
                                        <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#4F81BD; padding:2px 5px;  font-size:14px" width="40%"><b>MRN</b></td>
                                        <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#4F81BD; padding:2px 5px;  font-size:14px">@Model.MRN </td>
                                    </tr>
                                    <tr style="border-collapse:separate;border:solid black 1px;border-radius:6px; -moz-border-radius:6px; border-color:#a9d7cc">
                                        <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#4F81BD; padding:2px 5px;  font-size:14px" width="40%"><b>NHS Number</b></td>
                                        <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#4F81BD; padding:2px 5px;  font-size:14px">@Model.NHSNumber </td>
                                    </tr>
                                    <tr style="border-collapse:separate;border:solid black 1px;border-radius:6px; -moz-border-radius:6px; border-color:#a9d7cc">
                                        <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#4F81BD; padding:2px 5px;  font-size:14px"><b>Patient Name</b></td>
                                        <td style="border-left:solid black 1px; border-top:solid black 1px; border-color:#4F81BD; padding:2px 5px;  font-size:14px">@Model.PatientName</td>

                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td>Comments :</td>
                    </tr>
                    <tr>
                        <td>
                            @if (ViewBag.IsReadOnly)
                            {
                                @Html.TextAreaFor(model => model.Comments, 5, 50, new { @class = "form-control", @readonly = true })
                            }
                            else
                            {
                                @Html.TextAreaFor(model => model.Comments, 5, 50, new { @class = "form-control" })
                            }
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        @if (string.IsNullOrEmpty(Model.UpdatedBy) && !string.IsNullOrEmpty(Model.CreatedBy))
                        {

                            <td><span><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Created By:</b>&nbsp;</span></td>
                            <td><span><b><i>@Model.CreatedBy</i></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
                            <td><span><b>Created Date:</b>&nbsp;</span></td>
                            <td><span><b><i>@Model.CreatedDate</i></b></span></td>

                        }
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        @if (!string.IsNullOrEmpty(Model.UpdatedBy) && !string.IsNullOrEmpty(Model.CreatedBy))
                        {

                            <td><span><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updated By:</b>&nbsp;</span></td>
                            <td><span><b><i>@Model.UpdatedBy</i></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
                            <td><span><b>Updated Date:</b>&nbsp;</span></td>
                            <td><span><b><i>@Model.UpdatedDate</i></b></span></td>

                        }
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td width="100%">
                            @if (Model.Discharged)
                            {
                                <input type="checkbox" id="Discharged" name="Discharged" checked><span>&nbsp;Discharge?</span>
                            }
                            else
                            {
                                <input type="checkbox" id="Discharged" name="Discharged"><span>&nbsp;Discharge?</span>
                            }
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        @if (string.IsNullOrEmpty(Model.DischargedBy))
        {
            <tr>
                <td>
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td><span id="DischargeCommentsLbl" style="display:none;">Dicharge Comments :</span></td>
                        </tr>
                        <tr>
                            <td>
                                @if (ViewBag.IsReadOnly)
                                {
                                    @Html.TextAreaFor(model => model.DischargeComments, 5, 50, new { @class = "form-control", style = "display: none;", @readonly = true, @id = "DischargeComments" })
                                }
                                else
                                {
                                    @Html.TextAreaFor(model => model.DischargeComments, 5, 50, new { @class = "form-control", style = "display: none;", @id = "DischargeComments" })
                                }
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        }
        else
        {
            <tr>
                <td>
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td><span id="DischargeCommentsLbl">Dicharge Comments :</span></td>
                        </tr>
                        <tr>
                            <td>
                                @if (ViewBag.IsReadOnly)
                                {
                                    @Html.TextAreaFor(model => model.DischargeComments, 5, 50, new { @class = "form-control", @readonly = true, @id = "DischargeComments" })
                                }
                                else
                                {
                                    @Html.TextAreaFor(model => model.DischargeComments, 5, 50, new { @class = "form-control", @id = "DischargeComments" })
                                }
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        }
    </table>
    if (!string.IsNullOrEmpty(Model.DischargedBy))
    {
        <div class="row">
            <div class="col-md-12">
                <div class="row_bar">
                    <span id="DischargeByLbl"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Discharged By:</b>&nbsp;</span>
                    <span id="DischargeByVal"><b><i>@Model.DischargedBy</i></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span id="DischargeDateLbl"><b>Discharged Date:</b>&nbsp;</span>
                    <span id="DischargeDateVal"><b><i>@Model.DischargedDate</i></b></span>
                </div>
            </div>
        </div>
    }

    <div class="pull-right">
        @if (ViewBag.IsReadOnly)
        {
            <button id="BtnNext" disabled="" type="submit" name="BtnNext" class="btn btn-primary btn-lg" style="background-color:#4F81BD !important; color:white !important">Save</button>
                                <button id="btnSave" disabled="" name="btnSave" class="btn btn-primary btn-lg" style="background-color:#4F81BD !important; color:white !important">Exit</button>
        }
        else
        {
            <button id="BtnNext" type="submit" name="BtnNext" class="btn btn-primary btn-lg" style="background-color:#4F81BD !important; color:white !important">Save</button>
                                <span id="btnSave" name="btnSave" class="btn btn-primary btn-lg" style="background-color:#4F81BD !important; color:white !important">Exit</span>
        }
    </div>
}
<br /><br />

<h2 style="font-size: 17px; margin-bottom: 20px; color: #4F81BD; font-weight: 600;">Appointments History</h2>
@if (Model.PastAppointments != null)
{
<div class="row">
    <div class="col-md-12">
        <div style="width:98%;">
            <table class="stripe row-border order-column" style="overflow:auto;" id="tblPatientDetails">
                <thead>
                    <tr bgcolor="#4F81BD" style="color:white;  font-size:11px;">
                        <th align="left" width="30%" style="">Appointment Date</th>
                        <th align="left" width="70%" style="">Outcome</th>
                    </tr>
                </thead>
                <tbody style="font-size:11px;padding:0px;">                   
                        @if (Model.PastAppointments.Count > 0)
                        {
                            foreach (var item in Model.PastAppointments)
                            {
                                <tr class="Entries">
                                    <td align="left" width="30%" style="">@item.AppointmentDate</td>
                                    <td align="left" width="70%" style="">@item.Outcome</td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="14" class="text-center" align="center">No Records Found.</td>
                            </tr>
                        }                    
                </tbody>
            </table>
        </div>
    </div>
</div>
}
<div class="modal fade" id="modelClose1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Message</h4>
                <button type="button" class="close" data-dismiss="modal">×</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">

                <div class="form-section" style="text-align:left">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row_bar">
                                <div>Do you want to exit without saving your changes?</div>
                            </div>
                        </div>


                        @*<div class="col-md-12">
                                <div class="row_bar">
                                    <div><input type="checkbox" id="QAPReview" name="QAPReview" checked disabled="disabled"><span>Review Completed?</span>?</div>
                                </div>
                            </div>*@
                        <br />
                        <br />
                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary btn-block" id="btnModelClose1" style="background-color:#4F81BD !important; color:white !important" data-dismiss="modal" formmethod="post" onclick="location.href='@Url.Action("BariatricsDashboard", "Home", new { id = 0, isReset = false })'">Yes</button>
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-primary btn-block" style="background-color:#4F81BD !important; color:white !important" name="btnCloseYes" id="btnCloseYes">No</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modelCloseNext">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Message</h4>
                <button type="button" class="close" data-dismiss="modal">×</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="form-section" style="text-align:left">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row_bar">
                                <div>Do you want to exit without saving your changes?</div>
                            </div>
                        </div>
                        <br />
                        <br />
                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary btn-block" style="background-color:#4F81BD !important; color:white !important" id="btnModelClose2" data-dismiss="modal" formmethod="post" onclick="location.href='@Url.Action("BariatricsDashboard", "Home", new { id = 0, isReset = false })'">Yes</button>
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-primary btn-block" style="background-color:#4F81BD !important; color:white !important" name="btnCloseYes2" id="btnCloseYes2">No</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modelDischarge">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Discharge?</h4>
                <button type="button" class="close" data-dismiss="modal">×</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="form-section" style="text-align:left">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row_bar">
                                <div>Are you sure you want to discharge the patient?</div>
                            </div>
                        </div>
                        <br />
                        <br />
                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary btn-block" style="background-color:#4F81BD !important; color:white !important" name="btnModelDischarge1" id="btnModelDischarge1">Yes</button>
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-primary btn-block" style="background-color:#4F81BD !important; color:white !important" name="btnModelDischarge2" id="btnModelDischarge2">No</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        //$('#dvPatientDetailsCimment').hide();
        $("#myBtnProcedures").click(function () {
            $("#myModalProcedures").modal();
        });
        $("#myBtnSecondaryDiagnoses").click(function () {
            $("#myModalSecondaryDiagnoses").modal();
        });
        $("#btnClose1").click(function () {
            $("#modelClose1").modal();
        });
        $("#Discharged").click(function () {
            if ($(this).is(':checked')) {
                $("#modelDischarge").modal();
            }
            else {
                $("#DischargeComments").css("display", "none");
                $("#DischargeCommentsLbl").css("display", "none");
                $("#DischargeByLbl").css("display", "none");
                $("#DischargeByVal").css("display", "none");
                $("#DischargeDateVal").css("display", "none");
                $("#DischargeDateLbl").css("display", "none");
            }
        });
        //$("#BtnNext").click(function (event) {
        //    if (!confirm('Are you sure that you want to submit the form'))
        //        event.preventDefault();
        //});
    });
</script>
<script type="text/javascript">
    $(function () {
        $("#btnModelClose1").click(function () {
            window.location.href = "@Url.Action("BariatricsDashboard", "Home", new { id = 0, isReset = false })";
        });
    });
</script>
<script>
    $(document).ready(function () {
        $("#btnCloseYes").click(function () {
            $("#modelClose1").modal('hide');
        });
        $("#btnModelDischarge1").click(function () {
            $("#modelDischarge").modal('hide');
            $("#DischargeComments").css("display", "block");
            $("#DischargeCommentsLbl").css("display", "block");
        });
        $("#btnModelDischarge2").click(function () {
            $("#modelDischarge").modal('hide');
            $('#Discharged').prop('checked', false);
            $("#DischargeComments").css("display", "none");
            $("#DischargeCommentsLbl").css("display", "none");
            $("#DischargeByLbl").css("display", "none");
            $("#DischargeByVal").css("display", "none");
            $("#DischargeDateVal").css("display", "none");
            $("#DischargeDateLbl").css("display", "none");
        });
        $("#btnSave").click(function () {
            $("#modelCloseNext").modal();
        });
    });
</script>
<script>
    $(document).ready(function () {
        $('#tblPatientDetails').DataTable(
            {
                "ordering": true,
                "paging": true,
                "searching": true,
                "pageLength": 10,
                "order": [[0, "desc"]],
                "aoColumns": [
                    { "sName": "AppointmentDate", "sTitle": "Appointment Date", "bSortable": "true" },
                    { "sName": "Outcome", "sTitle": "Outcome", "bSortable": "true" }
                ],
                "lengthMenu": [
                    [10, 20, 50, 100, -1],
                    ['10 rows', '20 rows', '50 rows', '100 rows', 'Show all']]
            });
    });
</script>
<script>
    $(document).ready(function () {
        $("#btnCloseYes").click(function () {
            $("#modelClose1").modal('hide');
        });
        $("#btnCloseYes2").click(function () {
            $("#modelCloseNext").modal('hide');
        });
    });
</script>

